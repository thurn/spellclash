// Copyright Â© spellclash 2024-present
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//   https://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

use enumset::{enum_set, EnumSet, EnumSetType};
use serde::{Deserialize, Serialize};
use strum::{Display, EnumString};

use crate::game_states::game_phase_step::GamePhaseStep;
use crate::text_strings::Text;

/// Possible subtypes of a card. Each subtype is connected to a specific card
/// type.
///
/// See <https://yawgatog.com/resources/magic-rules/#R2053>
#[derive(Debug, Clone, Default)]
pub struct CardSubtypes {
    pub artifact: EnumSet<ArtifactSubtype>,
    pub enchantment: EnumSet<EnchantmentSubtype>,
    pub land: EnumSet<LandSubtype>,
    pub planeswalker: EnumSet<PlaneswalkerSubtype>,
    pub instant_or_sorcery_subtype: EnumSet<InstantOrSorcerySubtype>,
    pub creature: EnumSet<CreatureType>,
    pub plane: EnumSet<PlaneSubtype>,
    pub dungeon: EnumSet<DungeonSubtype>,
    pub battle: EnumSet<BattleSubtype>,
}

/// Possible subtypes of artifacts
///
/// See <https://yawgatog.com/resources/magic-rules/#R2053g>
#[derive(Debug, EnumSetType, EnumString)]
pub enum ArtifactSubtype {
    Attraction,
    Blood,
    Bobblehead,
    Clue,
    Contraption,
    Equipment,
    Food,
    Fortification,
    Gold,
    Incubator,
    Junk,
    Map,
    Powerstone,
    Treasure,
    Vehicle,
}

/// Possible subtypes of enchantments
///
/// See <https://yawgatog.com/resources/magic-rules/#R2053h>
#[derive(Debug, EnumSetType, EnumString)]
pub enum EnchantmentSubtype {
    Aura,
    Background,
    Cartouche,
    Case,
    Class,
    Curse,
    Role,
    Rune,
    Saga,
    Shard,
    Shrine,
}

/// Possible subtypes of lands
///
/// See <https://yawgatog.com/resources/magic-rules/#R2053ia>
#[derive(Debug, Display, EnumSetType, EnumString, Serialize, Deserialize)]
pub enum LandSubtype {
    Cave,
    Desert,
    Forest,
    Gate,
    Island,
    Lair,
    Locus,
    Mine,
    Mountain,
    Plains,
    PowerPlant,
    Sphere,
    Swamp,
    Tower,
    Urzas,
}

pub const BASIC_LANDS: EnumSet<LandSubtype> = enum_set!(
    LandSubtype::Plains
        | LandSubtype::Island
        | LandSubtype::Swamp
        | LandSubtype::Mountain
        | LandSubtype::Forest
);

impl From<LandSubtype> for Text {
    fn from(value: LandSubtype) -> Self {
        Text::LandSubtype(value)
    }
}

/// Possible subtypes of planeswalkers
///
/// See <https://yawgatog.com/resources/magic-rules/#R2053j>
#[derive(Debug, EnumSetType, EnumString)]
pub enum PlaneswalkerSubtype {
    Ajani,
    Aminatou,
    Angrath,
    Arlinn,
    Ashiok,
    Bahamut,
    Basri,
    Bolas,
    Calix,
    Chandra,
    Comet,
    Dack,
    Dakkon,
    Daretti,
    Davriel,
    Dihada,
    Domri,
    Dovin,
    Ellywick,
    Elminster,
    Elspeth,
    Estrid,
    Freyalise,
    Garruk,
    Gideon,
    Grist,
    Guff,
    Huatli,
    Jace,
    Jared,
    Jaya,
    Jeska,
    Kaito,
    Karn,
    Kasmina,
    Kaya,
    Kiora,
    Koth,
    Liliana,
    Lolth,
    Lukka,
    Minsc,
    Mordenkainen,
    Nahiri,
    Narset,
    Niko,
    Nissa,
    Nixilis,
    Oko,
    Ral,
    Rowan,
    Saheeli,
    Samut,
    Sarkhan,
    Serra,
    Sivitri,
    Sorin,
    Szat,
    Tamiyo,
    Tasha,
    Teferi,
    Teyo,
    Tezzeret,
    Tibalt,
    Tyvar,
    Ugin,
    Urza,
    Venser,
    Vivien,
    Vraska,
    Vronos,
    Will,
    Windgrace,
    Wrenn,
    Xenagos,
    Yanggu,
    Yanling,
    Zariel,
}

/// Possible subtypes of instants or sorceries
///
/// See <https://yawgatog.com/resources/magic-rules/#R2053k>
#[derive(Debug, EnumSetType, EnumString)]
pub enum InstantOrSorcerySubtype {
    Adventure,
    Arcane,
    Lesson,
    Trap,
}

/// Possible subtypes of creatures or tribal cards
///
/// See <https://yawgatog.com/resources/magic-rules/#R2053m>
#[derive(Debug, EnumSetType, EnumString)]
pub enum CreatureType {
    Advisor,
    Aetherborn,
    Alien,
    Ally,
    Angel,
    Antelope,
    Ape,
    Archer,
    Archon,
    Armadillo,
    Army,
    Artificer,
    Assassin,
    AssemblyWorker,
    Astartes,
    Atog,
    Aurochs,
    Avatar,
    Azra,
    Badger,
    Balloon,
    Barbarian,
    Bard,
    Basilisk,
    Bat,
    Bear,
    Beast,
    Beaver,
    Beeble,
    Beholder,
    Berserker,
    Bird,
    Blinkmoth,
    Boar,
    Bringer,
    Brushwagg,
    Camarid,
    Camel,
    Capybara,
    Caribou,
    Carrier,
    Cat,
    Centaur,
    Cephalid,
    Child,
    Chimera,
    Citizen,
    Cleric,
    Clown,
    Cockatrice,
    Construct,
    Coward,
    Coyote,
    Crab,
    Crocodile,
    Ctan,
    Custodes,
    Cyberman,
    Cyclops,
    Dalek,
    Dauthi,
    Demigod,
    Demon,
    Deserter,
    Detective,
    Devil,
    Dinosaur,
    Djinn,
    Doctor,
    Dog,
    Dragon,
    Drake,
    Dreadnought,
    Drone,
    Druid,
    Dryad,
    Dwarf,
    Efreet,
    Egg,
    Elder,
    Eldrazi,
    Elemental,
    Elephant,
    Elf,
    Elk,
    Employee,
    Eye,
    Faerie,
    Ferret,
    Fish,
    Flagbearer,
    Fox,
    Fractal,
    Frog,
    Fungus,
    Gamer,
    Gargoyle,
    Germ,
    Giant,
    Gith,
    Gnoll,
    Gnome,
    Goat,
    Goblin,
    God,
    Golem,
    Gorgon,
    Graveborn,
    Gremlin,
    Griffin,
    Guest,
    Hag,
    Halfling,
    Hamster,
    Harpy,
    Hellion,
    Hippo,
    Hippogriff,
    Homarid,
    Homunculus,
    Horror,
    Horse,
    Human,
    Hydra,
    Hyena,
    Illusion,
    Imp,
    Incarnation,
    Inkling,
    Inquisitor,
    Insect,
    Jackal,
    Jellyfish,
    Juggernaut,
    Kavu,
    Kirin,
    Kithkin,
    Knight,
    Kobold,
    Kor,
    Kraken,
    Llama,
    Lamia,
    Lammasu,
    Leech,
    Leviathan,
    Lhurgoyf,
    Licid,
    Lizard,
    Manticore,
    Masticore,
    Mercenary,
    Merfolk,
    Metathran,
    Minion,
    Minotaur,
    Mite,
    Mole,
    Monger,
    Mongoose,
    Monk,
    Monkey,
    Moonfolk,
    Mount,
    Mouse,
    Mutant,
    Myr,
    Mystic,
    Naga,
    Nautilus,
    Necron,
    Nephilim,
    Nightmare,
    Nightstalker,
    Ninja,
    Noble,
    Noggle,
    Nomad,
    Nymph,
    Octopus,
    Ogre,
    Ooze,
    Orb,
    Orc,
    Orgg,
    Otter,
    Ouphe,
    Ox,
    Oyster,
    Pangolin,
    Peasant,
    Pegasus,
    Pentavite,
    Performer,
    Pest,
    Phelddagrif,
    Phoenix,
    Phyrexian,
    Pilot,
    Pincher,
    Pirate,
    Plant,
    Porcupine,
    Possum,
    Praetor,
    Primarch,
    Prism,
    Processor,
    Rabbit,
    Raccoon,
    Ranger,
    Rat,
    Rebel,
    Reflection,
    Rhino,
    Rigger,
    Robot,
    Rogue,
    Sable,
    Salamander,
    Samurai,
    Sand,
    Saproling,
    Satyr,
    Scarecrow,
    Scientist,
    Scion,
    Scorpion,
    Scout,
    Sculpture,
    Serf,
    Serpent,
    Servo,
    Shade,
    Shaman,
    Shapeshifter,
    Shark,
    Sheep,
    Siren,
    Skeleton,
    Slith,
    Sliver,
    Sloth,
    Slug,
    Snail,
    Snake,
    Soldier,
    Soltari,
    Spawn,
    Specter,
    Spellshaper,
    Sphinx,
    Spider,
    Spike,
    Spirit,
    Splinter,
    Sponge,
    Squid,
    Squirrel,
    Starfish,
    Surrakar,
    Survivor,
    Synth,
    Tentacle,
    Tetravite,
    Thalakos,
    Thopter,
    Thrull,
    Tiefling,
    TimeLord,
    Treefolk,
    Trilobite,
    Triskelavite,
    Troll,
    Turtle,
    Tyranid,
    Unicorn,
    Vampire,
    Varmint,
    Vedalken,
    Viashino,
    Volver,
    Wall,
    Walrus,
    Warlock,
    Warrior,
    Weird,
    Werewolf,
    Whale,
    Wizard,
    Wolf,
    Wolverine,
    Wombat,
    Worm,
    Wraith,
    Wurm,
    Yeti,
    Zombie,
    Zubera,
}

/// Possible subtypes of planes
///
/// See <https://yawgatog.com/resources/magic-rules/#R2053n>
#[derive(Debug, EnumSetType, EnumString)]
pub enum PlaneSubtype {
    TheAbyss,
    Alara,
    AlfavaMetraxis,
    Amonkhet,
    AndrozaniMinor,
    Antausia,
    Apalapucia,
    Arcavios,
    Arkhos,
    Azgol,
    Belenon,
    BolassMeditationRealm,
    Capenna,
    Cridhe,
    TheDalekAsylum,
    Darillium,
    Dominaria,
    Earth,
    Echoir,
    Eldraine,
    Equilor,
    Ergamon,
    Fabacin,
    Fiora,
    Gallifrey,
    Gargantikar,
    Gobakhan,
    HorseheadNebula,
    Ikoria,
    Innistrad,
    Iquatana,
    Ir,
    Ixalan,
    Kaladesh,
    Kaldheim,
    Kamigawa,
    Kandoka,
    Karsus,
    Kephalai,
    Kinshala,
    Kolbahan,
    Kylem,
    Kyneth,
    TheLibrary,
    Lorwyn,
    Luvion,
    Mars,
    Mercadia,
    Mirrodin,
    Moag,
    Mongseng,
    Moon,
    Muraganda,
    Necros,
    NewEarth,
    NewPhyrexia,
    OutsideMuttersSpiral,
    Phyrexia,
    Pyrulea,
    Rabiah,
    Rath,
    Ravnica,
    Regatha,
    Segovia,
    SerrasRealm,
    Shadowmoor,
    Shandalar,
    Shenmeng,
    Skaro,
    Spacecraft,
    Tarkir,
    Theros,
    Time,
    Trenzalore,
    Ulgrotha,
    UnknownPlanet,
    Valla,
    Vryn,
    Wildfire,
    Xerex,
    Zendikar,
    Zhalfir,
}

/// Possible subtypes of dungeons
///
/// See <https://yawgatog.com/resources/magic-rules/#R2053p>
#[derive(Debug, EnumSetType, EnumString)]
pub enum DungeonSubtype {
    Undercity,
}

/// Possible subtypes of battles
///
/// See <https://yawgatog.com/resources/magic-rules/#R2053q>
#[derive(Debug, EnumSetType, EnumString)]
pub enum BattleSubtype {
    Siege,
}
